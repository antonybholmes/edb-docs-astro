---
import Footer from '@/components/Footer.astro'
import { DocDrawer } from '@/components/help/doc-drawer'
import { DocTreeNode } from '@/components/help/doc-tree-node'
import { BaseCol } from '@/components/layout/base-col'
import BaseLayout from '@/layouts/BaseLayout.astro'
import { buildNodeTree, DOCS_DIR } from '@/lib/docs'
import { SITE_TITLE } from '../consts'

const [rootNode, _] = await buildNodeTree(DOCS_DIR)
---

<BaseLayout title={SITE_TITLE} bg="bg-background">
  <DocDrawer
    node={rootNode}
    slug={[]}
    client:only="react"
    slot="small-header-left"
  />

  <Fragment slot="main">
    <aside
      class="fixed top-20 bottom-25 left-[1%] hidden w-1/5 overflow-x-hidden overflow-y-auto lg:block xl:left-[10%] xl:w-1/6"
    >
      <DocTreeNode
        node={rootNode}
        slug={[]}
        expanded={true}
        client:only="react"
        className="text-sm"
      />
    </aside>

    <BaseCol
      className="mx-auto mt-8 min-h-screen w-9/10 gap-y-8 lg:w-1/2 xl:w-2/5"
    >
      <div class="h-screen">
        {SITE_TITLE} Documentation.
      </div>
      <Footer />
    </BaseCol>
  </Fragment>
</BaseLayout>
